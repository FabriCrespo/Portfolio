---
import Layout from "@/layouts/Layout.astro"
import { t } from "@/utils/i18n"

import AboutMe from "@/components/AboutMe.astro"
import Briefcase from "@/components/icons/Briefcase.astro"
import CodeIcon from "@/components/icons/Code.astro"
import Experience from "@/components/Experience.astro"
import ProfileCheck from "@/components/icons/ProfileCheck.astro"
import Projects from "@/components/Projects.astro"
import SectionContainer from "@/components/SectionContainer.astro"
import Hero from "@/components/Hero.astro"
import TitleSection from "@/components/TitleSection.astro"
import Achievements from "@/components/Achievements.astro"
---

<Layout
  title="Fabricio Crespo - Computer Systems Engineering Student & Full-Stack Developer"
  description="Portfolio of Fabricio Crespo, a passionate Computer Systems Engineering student specializing in full-stack development, AI integration, and innovative web solutions."
>
  <main class="px-4">
    <SectionContainer class="py-16 md:py-36">
      <Hero>
      </slot>
    </Hero>
    </SectionContainer>
    <div class="space-y-24">
    <section id="experience" class="scroll-mt-20">
      <SectionContainer>
        <TitleSection>
          <Briefcase class="size-8" />
          {t('sections.experience')}
        </TitleSection>
        <Experience />
      </SectionContainer>
    </section>

    <section id="projects" class="scroll-mt-20">
      <SectionContainer>
        <TitleSection>
          <CodeIcon class="size-7" />
          {t('sections.projects')}
        </TitleSection>
        <Projects />
      </SectionContainer>
    </section>

    <section id="achievements" class="scroll-mt-20">
      <SectionContainer>
        <TitleSection>
          <ProfileCheck class="size-7" />
          {t('sections.achievements')}
        </TitleSection>
        <Achievements />
      </SectionContainer>
    </section>

    <section id="about-me" class="scroll-mt-20">
      <SectionContainer>
        <TitleSection>
          <ProfileCheck class="size-8" />
          {t('sections.about')}
        </TitleSection>
        <AboutMe />
      </SectionContainer>
    </section>
  </div>
  </main>
</Layout>

<script>
  import { t } from "@/utils/i18n";

  const updateSectionTitles = () => {
    const sections = ['experience', 'projects', 'achievements', 'about'];
    
    sections.forEach(section => {
      const titleElement = document.querySelector(`#${section.replace('about', 'about-me')} h2`);
      if (titleElement) {
        titleElement.textContent = t(`sections.${section}`);
      }
    });
  };

  // Actualizar cuando cambia el idioma
  window.addEventListener('storage', (e) => {
    if (e.key === 'language') {
      updateSectionTitles();
    }
  });

  // Actualizar cuando se carga la pÃ¡gina
  document.addEventListener('astro:page-load', () => {
    updateSectionTitles();
  });
</script>
